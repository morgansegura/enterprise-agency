@reference "tailwindcss";

/* =============================================================================
 * Block Wrapper - Webflow-style smooth interactions
 * ============================================================================= */

.block-wrapper {
  @apply relative;
  /* Smooth transitions for all state changes */
  transition: box-shadow 150ms ease-out, outline-color 150ms ease-out;
}

/* Subtle hover hint - very light, non-intrusive */
.block-wrapper:hover:not(.is-selected) {
  box-shadow: inset 0 0 0 1px var(--builder-border);
}

/* Selected state - refined border with subtle glow */
.block-wrapper.is-selected {
  box-shadow:
    inset 0 0 0 1.5px var(--builder-primary),
    0 0 0 3px color-mix(in srgb, var(--builder-primary) 15%, transparent);
}

/* Hovered state (from layers popover) - subtle highlight */
.block-wrapper.is-hovered:not(.is-selected) {
  box-shadow:
    inset 0 0 0 1.5px var(--builder-primary),
    0 0 0 3px color-mix(in srgb, var(--builder-primary) 10%, transparent);
}

/* =============================================================================
 * Floating Toolbar - smooth entrance
 * ============================================================================= */

.block-toolbar {
  @apply absolute -top-11 left-1/2 -translate-x-1/2;
  @apply bg-(--builder-card) rounded-lg;
  @apply px-1.5 py-1;
  @apply flex items-center gap-0.5;
  @apply z-20;
  /* Refined shadow and border */
  border: 1px solid var(--builder-border);
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 2px 4px rgba(0, 0, 0, 0.04);
  /* Smooth entrance animation */
  animation: toolbar-enter 150ms ease-out;
}

@keyframes toolbar-enter {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

.block-toolbar button {
  @apply h-7 w-7;
  @apply text-(--builder-muted-foreground);
  @apply rounded-md;
  @apply flex items-center justify-center;
  transition: all 120ms ease-out;
}

.block-toolbar button:hover {
  @apply text-(--builder-foreground);
  background: var(--builder-muted);
}

.block-toolbar button:active {
  transform: scale(0.95);
}

.block-toolbar-separator {
  @apply w-px h-4 mx-0.5;
  background: var(--builder-border);
}

.block-toolbar-delete {
  @apply text-(--builder-muted-foreground);
}

.block-toolbar-delete:hover {
  @apply text-(--builder-destructive);
  background: color-mix(in srgb, var(--builder-destructive) 10%, transparent) !important;
}

/* =============================================================================
 * Selection Handles - refined corners
 * ============================================================================= */

.block-handle {
  @apply absolute w-2 h-2 bg-white rounded-sm;
  @apply z-10;
  border: 1.5px solid var(--builder-primary);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
  /* Smooth entrance */
  animation: handle-enter 150ms ease-out;
  transition: transform 100ms ease-out, box-shadow 100ms ease-out;
}

.block-handle:hover {
  transform: scale(1.2);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

@keyframes handle-enter {
  from {
    opacity: 0;
    transform: scale(0.5);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Corner handles */
.block-handle.top-left {
  @apply -top-1 -left-1 cursor-nwse-resize;
}

.block-handle.top-right {
  @apply -top-1 -right-1 cursor-nesw-resize;
}

.block-handle.bottom-left {
  @apply -bottom-1 -left-1 cursor-nesw-resize;
}

.block-handle.bottom-right {
  @apply -bottom-1 -right-1 cursor-nwse-resize;
}

/* Edge handles */
.block-handle.top {
  @apply -top-1 left-1/2 -translate-x-1/2 cursor-ns-resize;
}

.block-handle.bottom {
  @apply -bottom-1 left-1/2 -translate-x-1/2 cursor-ns-resize;
}

.block-handle.left {
  @apply top-1/2 -left-1 -translate-y-1/2 cursor-ew-resize;
}

.block-handle.right {
  @apply top-1/2 -right-1 -translate-y-1/2 cursor-ew-resize;
}

/* =============================================================================
 * Content area
 * ============================================================================= */

.block-content {
  @apply relative;
}

/* Ensure content is interactive */
.block-content [contenteditable="true"] {
  @apply outline-none;
}

.block-content [contenteditable="true"]:focus {
  @apply outline-none;
}
