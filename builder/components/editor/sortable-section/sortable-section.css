@reference "tailwindcss";

/* =============================================================================
 * Sortable Section - Webflow-style smooth interactions
 * ============================================================================= */

.sortable-section {
  @apply relative;
}

.sortable-section.is-dragging {
  @apply opacity-50 cursor-grabbing;
}

/* =============================================================================
 * Section Visual - refined hover states
 * ============================================================================= */

.section-visual {
  @apply relative;
  /* Use box-shadow for smoother transitions than border */
  box-shadow: inset 0 0 0 0 transparent;
  transition: box-shadow 200ms ease-out;
}

/* Subtle hover state - refined border */
.sortable-section:hover .section-visual,
.sortable-section.is-settings-open .section-visual,
.sortable-section.is-popover-open .section-visual {
  box-shadow: inset 0 0 0 1.5px var(--builder-primary);
}

/* Hide section border when a block inside is selected */
.sortable-section.has-selected-block .section-visual,
.sortable-section.has-selected-block:hover .section-visual {
  box-shadow: inset 0 0 0 0 transparent;
}

/* Selected state for sidebar editing - subtle glow */
.section-visual.is-selected {
  box-shadow:
    inset 0 0 0 1.5px var(--builder-primary),
    0 0 0 3px color-mix(in srgb, var(--builder-primary) 10%, transparent);
  background: color-mix(in srgb, var(--builder-primary) 3%, transparent);
}

/* =============================================================================
 * Control Buttons - smooth fade in/out
 * ============================================================================= */

/* Shared control button styles */
.section-drag-handle,
.section-actions-handle,
.section-add-block {
  @apply absolute z-10;
  opacity: 0;
  transform: translateY(4px);
  transition:
    opacity 150ms ease-out,
    transform 150ms ease-out;
  pointer-events: none;
}

/* Show controls on section hover */
.sortable-section:hover .section-drag-handle,
.sortable-section:hover .section-actions-handle,
.sortable-section:hover .section-add-block,
.sortable-section.is-settings-open .section-drag-handle,
.sortable-section.is-settings-open .section-actions-handle,
.sortable-section.is-settings-open .section-add-block,
.sortable-section.is-popover-open .section-drag-handle,
.sortable-section.is-popover-open .section-actions-handle,
.sortable-section.is-popover-open .section-add-block {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/* Keep drag handle visible when a block is selected */
.sortable-section.has-selected-block .section-drag-handle {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/* Drag handle - left side */
.section-drag-handle {
  @apply left-2 top-2;
  @apply p-1.5 rounded-md;
  background: var(--builder-card);
  border: 1px solid var(--builder-border);
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.06),
    0 1px 2px rgba(0, 0, 0, 0.04);
  @apply text-(--builder-muted-foreground);
  @apply cursor-grab active:cursor-grabbing;
}

.section-drag-handle:hover {
  @apply text-(--builder-foreground);
  border-color: var(--builder-muted-foreground);
}

.section-drag-handle:active {
  transform: scale(0.95) translateY(0);
}

/* Actions handle - right side */
.section-actions-handle {
  @apply right-2 top-2;
  @apply p-1.5 rounded-md;
  background: var(--builder-card);
  border: 1px solid var(--builder-border);
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.06),
    0 1px 2px rgba(0, 0, 0, 0.04);
  @apply text-(--builder-muted-foreground);
  @apply cursor-pointer;
}

.section-actions-handle:hover {
  @apply text-(--builder-foreground);
  border-color: var(--builder-muted-foreground);
}

.section-actions-handle:active {
  transform: scale(0.95) translateY(0);
}

/* Add Block button - top left */
.section-add-block {
  @apply left-12 top-2;
}

.section-add-block button {
  @apply px-3 py-1.5;
  @apply text-xs font-medium;
  background: var(--builder-card);
  border: 1px solid var(--builder-border);
  border-radius: 0.375rem;
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.06),
    0 1px 2px rgba(0, 0, 0, 0.04);
  @apply text-(--builder-foreground);
  transition: all 120ms ease-out;
}

.section-add-block button:hover {
  background: var(--builder-muted);
  border-color: var(--builder-muted-foreground);
}

.section-add-block button:active {
  transform: scale(0.97);
}

/* =============================================================================
 * Add Section Buttons - smooth reveal
 * ============================================================================= */

.section-add-above,
.section-add-below {
  @apply absolute left-1/2 -translate-x-1/2 z-30;
  opacity: 0;
  transform: translateX(-50%) scale(0.9);
  transition:
    opacity 150ms ease-out,
    transform 150ms ease-out;
  pointer-events: none;
}

.section-add-above {
  @apply -top-4;
}

.section-add-below {
  @apply -bottom-4;
}

.sortable-section:hover .section-add-above,
.sortable-section:hover .section-add-below,
.sortable-section.is-settings-open .section-add-above,
.sortable-section.is-settings-open .section-add-below,
.sortable-section.is-popover-open .section-add-above,
.sortable-section.is-popover-open .section-add-below {
  opacity: 1;
  transform: translateX(-50%) scale(1);
  pointer-events: auto;
}

/* Add section button styling */
.section-add-btn {
  @apply px-3 py-1;
  @apply text-xs font-medium tracking-wide;
  background: var(--builder-primary);
  color: var(--builder-primary-foreground);
  border-radius: 9999px;
  box-shadow:
    0 2px 8px color-mix(in srgb, var(--builder-primary) 30%, transparent),
    0 1px 2px rgba(0, 0, 0, 0.1);
  transition: all 120ms ease-out;
}

.section-add-btn:hover {
  transform: scale(1.02);
  box-shadow:
    0 4px 12px color-mix(in srgb, var(--builder-primary) 40%, transparent),
    0 2px 4px rgba(0, 0, 0, 0.1);
}

.section-add-btn:active {
  transform: scale(0.98);
}

/* =============================================================================
 * Floating Action Panel - smooth entrance
 * ============================================================================= */

.section-panel {
  @apply absolute top-2 right-2 z-20;
  @apply rounded-lg;
  @apply p-1.5 min-w-[160px];
  @apply flex flex-col gap-0.5;
  background: var(--builder-card);
  border: 1px solid var(--builder-border);
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.12),
    0 4px 8px rgba(0, 0, 0, 0.06);
  opacity: 0;
  transform: translateY(8px) scale(0.95);
  transition:
    opacity 150ms ease-out,
    transform 150ms ease-out;
  pointer-events: none;
}

.sortable-section:hover .section-panel,
.sortable-section.is-settings-open .section-panel {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

/* Panel items */
.section-panel-item {
  @apply w-full justify-start gap-2 text-sm;
  @apply rounded-md;
  @apply h-8 px-2;
  @apply text-(--builder-muted-foreground);
  transition: all 100ms ease-out;
}

.section-panel-item:hover {
  @apply text-(--builder-foreground);
  background: var(--builder-muted);
}

.section-panel-item:active {
  transform: scale(0.98);
}

.section-panel-item span {
  @apply text-sm font-medium text-inherit;
}

/* Panel row - icon buttons */
.section-panel-row {
  @apply flex items-center justify-between;
  @apply border-y py-1.5 my-1;
  border-color: var(--builder-border);
}

.section-panel-row button {
  @apply h-7 w-7;
  @apply rounded-md;
  @apply text-(--builder-muted-foreground);
  transition: all 100ms ease-out;
}

.section-panel-row button:hover {
  @apply text-(--builder-foreground);
  background: var(--builder-muted);
}

.section-panel-row button:active {
  transform: scale(0.9);
}

/* Delete item - red styling */
.section-panel-delete {
  @apply text-(--builder-muted-foreground);
}

.section-panel-delete:hover {
  @apply text-(--builder-destructive);
  background: color-mix(in srgb, var(--builder-destructive) 10%, transparent) !important;
}

/* =============================================================================
 * Section Container
 * ============================================================================= */

.section-container {
  @apply min-h-[40px];
}
