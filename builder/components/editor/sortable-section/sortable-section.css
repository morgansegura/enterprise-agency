@reference "tailwindcss";

.sortable-section {
  @apply relative;
}

.sortable-section.is-dragging {
  @apply opacity-50 cursor-grabbing;
}

/* Section visual - the constrained, visible section with background */
.section-visual {
  @apply relative;
  @apply border-2 border-transparent;
  @apply transition-all duration-200;
}

/* Use builder-primary for the section hover border (builder UI) */
.sortable-section:hover .section-visual,
.sortable-section.is-settings-open .section-visual,
.sortable-section.is-popover-open .section-visual {
  @apply border-(--builder-primary);
}

/* Hide section border when a block inside is selected */
.sortable-section.has-selected-block .section-visual,
.sortable-section.has-selected-block:hover .section-visual {
  @apply border-transparent;
}

/* Drag handle - left side (builder UI - use builder tokens) */
.section-drag-handle {
  @apply absolute left-2 top-2 z-10;
  @apply p-2 rounded-lg;
  @apply bg-(--builder-card) border border-(--builder-border) shadow-sm;
  @apply text-(--builder-muted-foreground) hover:text-(--builder-foreground);
  @apply cursor-grab active:cursor-grabbing;
  @apply opacity-0 transition-opacity;
}

.sortable-section:hover .section-drag-handle,
.sortable-section.is-settings-open .section-drag-handle,
.sortable-section.is-popover-open .section-drag-handle {
  @apply opacity-100;
}

/* Keep layers button visible when a block is selected */
.sortable-section.has-selected-block .section-drag-handle {
  @apply opacity-100;
}

/* Actions handle - right side (builder UI - use builder tokens) */
.section-actions-handle {
  @apply absolute right-2 top-2 z-10;
  @apply p-2 rounded-lg;
  @apply bg-(--builder-card) border border-(--builder-border) shadow-sm;
  @apply text-(--builder-muted-foreground) hover:text-(--builder-foreground);
  @apply cursor-pointer;
  @apply opacity-0 transition-opacity;
}

.sortable-section:hover .section-actions-handle,
.sortable-section.is-settings-open .section-actions-handle,
.sortable-section.is-popover-open .section-actions-handle {
  @apply opacity-100;
}

/* Add Block button - top left (builder UI - use builder tokens) */
.section-add-block {
  @apply absolute left-14 top-2 z-10;
  @apply opacity-0 transition-opacity;
}

.sortable-section:hover .section-add-block,
.sortable-section.is-settings-open .section-add-block,
.sortable-section.is-popover-open .section-add-block {
  @apply opacity-100;
}

.section-add-block button {
  @apply bg-(--builder-card) border border-(--builder-border) shadow-sm;
  @apply text-(--builder-foreground) font-semibold;
  @apply hover:bg-(--builder-muted);
}

/* ADD SECTION buttons - positioned as overlays at section boundaries */
.section-add-above,
.section-add-below {
  @apply absolute left-1/2 -translate-x-1/2 z-30;
  @apply opacity-0 pointer-events-none transition-opacity;
}

.section-add-above {
  @apply -top-5;
}

.section-add-below {
  @apply -bottom-5;
}

.sortable-section:hover .section-add-above,
.sortable-section:hover .section-add-below,
.sortable-section.is-settings-open .section-add-above,
.sortable-section.is-settings-open .section-add-below,
.sortable-section.is-popover-open .section-add-above,
.sortable-section.is-popover-open .section-add-below {
  @apply opacity-100 pointer-events-auto;
}

/* ADD SECTION button (builder UI - use builder tokens) */
.section-add-btn {
  @apply bg-(--builder-primary) text-(--builder-primary-foreground);
  @apply font-semibold uppercase tracking-wide text-sm;
  @apply px-4 py-1.5;
  @apply hover:bg-(--builder-primary)/90;
  @apply shadow-md uppercase;
}

/* Floating Action Panel - right side (builder UI - use builder tokens) */
.section-panel {
  @apply absolute top-2 right-2 z-20;
  @apply bg-(--builder-card) border border-(--builder-border) rounded-lg shadow-lg;
  @apply p-2 min-w-[180px];
  @apply opacity-0 pointer-events-none transition-all duration-200;
  @apply flex flex-col gap-1;
}

.sortable-section:hover .section-panel,
.sortable-section.is-settings-open .section-panel {
  @apply opacity-100 pointer-events-auto;
}

/* Panel items - full width buttons with icon + text */
.section-panel-item {
  @apply w-full justify-start gap-3 text-sm;
  @apply text-(--builder-foreground) hover:bg-(--builder-muted)/50 rounded-sm;
  @apply h-10 px-3;
}

.section-panel-item span {
  @apply text-sm font-semibold tracking-wide text-inherit;
}

/* Panel row - icon buttons in a row */
.section-panel-row {
  @apply flex items-center justify-between;
  @apply border-y border-(--builder-border) py-2 my-1;
}

.section-panel-row button {
  @apply h-8 w-8;
  @apply text-(--builder-muted-foreground) hover:text-(--builder-foreground) hover:bg-(--builder-muted);
}

/* Delete item - red styling */
.section-panel-delete {
  @apply text-(--builder-destructive) hover:text-(--builder-destructive) hover:bg-(--builder-destructive)/10;
}

/* Section container - applies container settings (width, layout, padding, etc.) */
.section-container {
  @apply min-h-[40px];
}
